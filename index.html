<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rettie Multi-Calculator + Fun Word Game</title>

  <style>
    @import url('https://fonts.cdnfonts.com/css/effra');

    /* Timer Bar */
    #timerBarContainer {
      width: 100%;
      background-color: #ccc;
      height: 20px;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 10px;
    }
    #timerBar {
      width: 100%;
      height: 100%;
      background-color: green;
      transition: width 0.1s linear;
    }
  </style>
</head>
<body>

  <!-- SECRET WORD GAME -->
  <div id="wordGame">
    <h2>Secret Word Duel</h2>
    <p>Guess letters to reveal the hidden word! You only have <strong>6</strong> wrong guesses allowed.</p>
    
    <div id="timerBarContainer">
      <div id="timerBar"></div>
    </div>
    
    <div id="wordDisplay"></div>
    <div>
      <input type="text" id="guessLetter" maxlength="1" placeholder="Enter a letter (a-z)" style="width:200px; text-transform: uppercase;"/>
      <button id="guessButton">Guess</button>
    </div>
    <p id="gameMessage" style="text-align: center; font-weight: 500;"></p>
    <p style="text-align: center;">
      Wrong Guesses Left: <span id="wrongGuesses">6</span>
    </p>
    <p>Words Solved: <span id="wordsSolved">0</span></p>

    <button id="resetWordGame">Reset Word Game</button>
    <button id="closeWordGameButton" style="margin-top: 10px;">Close Word Game</button>
  </div>

  <script>
    let wordsSolved = 0;
    let timerInterval;
    let timeLeft = 30;

    function updateTimer() {
      timeLeft--;
      document.getElementById("timerBar").style.width = (timeLeft / 30 * 100) + "%";
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        gameMessage.textContent = "Time's up! The word was " + secretWord;
        guessLetter.disabled = true;
        guessButton.disabled = true;
      }
    }

    function resetTimer() {
      timeLeft = 30;
      clearInterval(timerInterval);
      timerInterval = setInterval(updateTimer, 1000);
      document.getElementById("timerBar").style.width = "100%";
    }

    function checkWinOrLose() {
      let revealedAll = true;
      for (let i = 0; i < secretWord.length; i++) {
        if (!guessedLetters.includes(secretWord[i])) {
          revealedAll = false;
          break;
        }
      }

      if (revealedAll) {
        gameMessage.textContent = `You Win! The word was "${secretWord}". New puzzle coming up...`;
        guessLetter.disabled = true;
        guessButton.disabled = true;
        wordsSolved++;
        document.getElementById("wordsSolved").textContent = wordsSolved;
        timeLeft += 10; // Bonus time for correct answer
        setTimeout(() => {
          startWordGame();
        }, 2000);
      } else if (maxWrongs <= 0) {
        gameMessage.textContent = `Game Over! The word was "${secretWord}".`;
        guessLetter.disabled = true;
        guessButton.disabled = true;
      }
    }

    function startWordGame() {
      resetTimer();
      secretWord = WORD_LIST[Math.floor(Math.random() * WORD_LIST.length)];
      guessedLetters = [];
      maxWrongs = 6;
      wrongGuessesSpan.textContent = maxWrongs;
      gameMessage.textContent = "";
      guessLetter.value = "";
      guessLetter.disabled = false;
      guessButton.disabled = false;
      renderWord();
    }
  </script>
</body>
</html>
